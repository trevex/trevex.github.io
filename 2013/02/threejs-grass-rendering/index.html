<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Nik Voss - Three.js simple grass rendering</title><link rel="stylesheet" href="http://nikvoss.com/css/style.css"/><link rel="alternate" type="application/rss+xml" title="Nik Voss" href="http://nikvoss.com/feed.xml"><link rel="canonical" href="http://nikvoss.com/2013/02/threejs-grass-rendering/"/><link rel="prev" title="Linux Mint Review!" href="http://nikvoss.com/2013/02/linux-mint/"/><link rel="next" title="Implementing ID3DInclude" href="http://nikvoss.com/2013/03/implementing-id3dinclude/"/></head><body> <header id="menu"><div class="hcenter"><div class="left title"> <a href="http://nikvoss.com"><img src="http://nikvoss.com/img/nik_voss.png" alt="Programmer's diary"/></a></div><ul class="right"><li><a href="/portfolio.html">Portfolio</a></li><li><a href="/index.html">Blog</a></li><li><a href="#contact">Contact</a></li><li><a href="#aboutme">About</a></li></ul></div> </header><div id="content" class="hcenter"> <article> <header><h1>Three.js simple grass rendering</h1> <time datetime="2013-02-17">February 17, 2013</time> </header> <section class="justify"><p>For my provisional summer project I will need grass, so I started investigating how to deal with grass efficiently in WebGL. This simple approach was a technique I used to render grass in one of my first OpenGL (2.1) programs years ago.</p><p>The theory is simple: Loads of instances of the same mesh. The geometry buffers can then be manipulated every frame to make the grass waving. Z-Ordering is avoided for the transparency by using AlphaTests. With batching or proper instancing in OpenGL it was possible to achieve decent performance. Unfortunately this last step is not possible with WebGL therefore the performance is limited, because the vast amount of issued drawing calls. Therefore dealing with the grass within a shader would be a better solution.</p><p>Anyway here is a video:</p> <iframe height='300' src='http://www.youtube.com/embed/rAGeAJ8tyzQ?color=white&amp;theme=light' width='600'> </iframe><p>And the <a href="https://dl.dropbox.com/u/43243793/examples/webgl_geometry_grass.html">demo</a>.</p><p>If waving grass is not necessary and three.js is used. It is also possible to use billboards along with three.js’s inbuilt particle system. I mocked up a version using this approach <a href="https://dl.dropbox.com/u/43243793/examples/webgl_particles_grass.html">here</a>. Unfortunately at least on my machine the resizing of the billboards does not work.</p><p>A completely different approach I used last is to completely generate the grass procedurally. Using a few triangles I simply generate each leaf and then merge the complete geometry. This performs reasonably well, but have a look for yourself:</p> <iframe height='300' src='http://www.youtube.com/embed/RocjbKKg1W4?color=white&amp;theme=light' width='600'> </iframe><p>Or try the final <a href="https://dl.dropbox.com/u/43243793/examples/webgl_shader_grass.html">demo</a>.</p><p>Overall three.js is quite powerful, but if I have some spare time left I will try to write a completely shader-based version from scratch to see how far this can be pushed within the boundaries of the browser environment.</p></section><div id="disqus_thread"></div> <script>var disqus_shortname="nikvoss";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </article></div> <footer id="info"><div class="hcenter"> <section id="contact" class="left"><h1>Contact</h1> <a href="https://twitter.com/niktehpui" title="Twitter"><div class="icon twitter"></div></a> <a href="https://github.com/trevex/" title="Github"><div class="icon github"></div></a> <a href="mailto:niklas.voss@gmail.com" title="Mail"><div class="icon mail"></div></a> <a href="https://plus.google.com/+NiklasVoss/auto" title="Google+"><div class="icon gplus"></div></a> </section> <section id="aboutme" class="justify right"><h1>About me</h1> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae odio est, sed pretium tortor. Proin sed turpis elit. Pellentesque et iaculis sapien. Nulla in lorem vel neque lobortis ornare. Phasellus vitae augue eu leo ullamcorper tincidunt ut at metus. Sed molestie porttitor lacus, a tincidunt leo convallis ac. Aenean nulla turpis, laoreet ac feugiat quis, condimentum non nulla. Donec egestas lobortis facilisis. Vivamus aliquam mattis nisi id commodo. </section><div class="clear"></div></div> </footer> <section id="copyright"> © Nik Voss </section></body></html>